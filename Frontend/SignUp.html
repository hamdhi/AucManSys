<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="General.css">
</head>

<body>
    <h2>Sign Up Form</h2>

    <form id="addUserForm">
        <input type="text" id="username" placeholder="Username" required />
        <input type="email" id="email" placeholder="Email" required />
        <input type="text" id="password" placeholder="Password" required />
        <select id="role">
            <option value="Seller">Seller</option>
            <option value="Bidder">Bidder</option>
        </select>
        <select id="isActive">
            <option value="true">Active</option>
            <option value="false">Inactive</option>
        </select>
        <button type="submit">Add User</button>



        <script>
            // Add user
            document.getElementById('addUserForm').addEventListener('submit', async e => {
                e.preventDefault();
                const dto = {
                    Username: document.getElementById('username').value,
                    Email: document.getElementById('email').value,
                    PasswordHash: document.getElementById('password').value,
                    Role: document.getElementById('role').value,
                    IsActive: document.getElementById('isActive').value === "true"
                };
                const response = await fetch('https://localhost:7212/api/UserAuth/add', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(dto)
                });

                if (response.ok) { // status 200-299
                    alert("User added successfully!");
                    window.location.href = "login.html"; // redirect
                } else {
                    const errorText = await response.text();
                    alert("Failed to add user: " + errorText);
                }
            });
        </script>
    </form>
</body>

</html>